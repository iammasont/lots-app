/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function r(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function a(t,e,n){return(e=i(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function i(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}t.d({},{XJ:()=>Y,C_:()=>H});var c={rgb:[{x:0,y:0},{x:.25,y:.25},{x:.5,y:.5},{x:.75,y:.75},{x:1,y:1}],red:[{x:0,y:0},{x:.25,y:.25},{x:.5,y:.5},{x:.75,y:.75},{x:1,y:1}],green:[{x:0,y:0},{x:.25,y:.25},{x:.5,y:.5},{x:.75,y:.75},{x:1,y:1}],blue:[{x:0,y:0},{x:.25,y:.25},{x:.5,y:.5},{x:.75,y:.75},{x:1,y:1}],currentChannel:"rgb"};function l(t){for(var e=0;e<t.length;e++){var n=t[e].x;if(Math.abs(t[e].y-n)>.01)return!1}return!0}function u(t,e){if(e<=0)return t[0].y;if(e>=1)return t[t.length-1].y;for(var n=0;n<t.length-1&&t[n+1].x<e;)n++;var r=t[n],a=t[n+1],o=(e-r.x)/(a.x-r.x);return r.y+o*(a.y-r.y)}var s=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.params=r(r({},JSON.parse(JSON.stringify(c))),e),this.curveCanvas=null,this.curveCtx=null,this.channelButtons={},this.activePoint=null,this.init=this.init.bind(this),this.drawCurve=this.drawCurve.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.resetCurve=this.resetCurve.bind(this)},e=[{key:"init",value:function(){console.log("Initializing Curves Panel"),this.curveCanvas=document.getElementById("curve-canvas"),this.curveCanvas?(this.curveCtx=this.curveCanvas.getContext("2d"),this.channelButtons={rgb:document.getElementById("curve-rgb"),red:document.getElementById("curve-red"),green:document.getElementById("curve-green"),blue:document.getElementById("curve-blue")},this.setupEvents(),this.updateChannelButtonUI(),this.drawCurve()):console.warn("Curve canvas not found")}},{key:"setupEvents",value:function(){var t=this;if(this.curveCanvas){this.curveCanvas.addEventListener("mousedown",this.handleMouseDown),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp);var e=function(e){var n=t.channelButtons[e];n&&n.addEventListener("click",(function(){t.params.currentChannel=e,t.updateChannelButtonUI(),t.drawCurve()}))};for(var n in this.channelButtons)e(n);var r=document.getElementById("reset-curve-btn");r&&r.addEventListener("click",this.resetCurve)}}},{key:"updateChannelButtonUI",value:function(){for(var t in this.channelButtons){var e=this.channelButtons[t];e&&(t===this.params.currentChannel?e.classList.add("active"):e.classList.remove("active"))}}},{key:"resetCurve",value:function(){console.log("Resetting curve"),this.params[this.params.currentChannel]=JSON.parse(JSON.stringify(c[this.params.currentChannel])),this.drawCurve(),H()}},{key:"drawCurve",value:function(){var t=this;if(this.curveCanvas&&this.curveCtx){var e=this.curveCanvas.width,n=this.curveCanvas.height;this.curveCtx.clearRect(0,0,e,n);var r,a=this.params[this.params.currentChannel];switch(this.curveCtx.fillStyle="rgba(20, 20, 20, 0.3)",this.curveCtx.fillRect(0,0,e,n),this.params.currentChannel){case"red":r="rgba(255, 100, 100, 0.8)";break;case"green":r="rgba(100, 255, 100, 0.8)";break;case"blue":r="rgba(100, 100, 255, 0.8)";break;default:r="rgba(255, 255, 255, 0.8)"}this.curveCtx.beginPath(),this.curveCtx.moveTo(a[0].x*e,(1-a[0].y)*n);for(var o=1;o<a.length;o++)this.curveCtx.lineTo(a[o].x*e,(1-a[o].y)*n);this.curveCtx.strokeStyle=r,this.curveCtx.lineWidth=2,this.curveCtx.stroke(),a.forEach((function(r,o){t.curveCtx.beginPath(),t.curveCtx.arc(r.x*e,(1-r.y)*n,5,0,2*Math.PI),0===o||o===a.length-1?t.curveCtx.fillStyle="rgba(150, 150, 150, 0.8)":t.curveCtx.fillStyle="rgba(255, 255, 255, 0.8)",t.curveCtx.fill(),t.curveCtx.strokeStyle="rgba(0, 0, 0, 0.8)",t.curveCtx.lineWidth=1,t.curveCtx.stroke()}))}else console.warn("Canvas not ready for drawing")}},{key:"handleMouseDown",value:function(t){if(this.curveCanvas){var e=this.curveCanvas.getBoundingClientRect(),n=(t.clientX-e.left)/e.width,r=1-(t.clientY-e.top)/e.height,a=this.params[this.params.currentChannel],o=1/0,i=null,c=-1;a.forEach((function(t,e){var a=t.x-n,l=t.y-r,u=Math.sqrt(a*a+l*l);u<o&&(o=u,i=t,c=e)})),o<.05&&c>0&&c<a.length-1&&(this.activePoint={point:i,index:c})}}},{key:"handleMouseMove",value:function(t){if(this.activePoint&&this.curveCanvas){var e=this.curveCanvas.getBoundingClientRect(),n=(t.clientX-e.left)/e.width,r=1-(t.clientY-e.top)/e.height;n=Math.max(0,Math.min(1,n)),r=Math.max(0,Math.min(1,r));var a=this.params[this.params.currentChannel],o=this.activePoint.index,i=a[o-1].x,c=a[o+1].x;n=Math.max(i+.01,Math.min(c-.01,n)),a[o].x=n,a[o].y=r,this.drawCurve(),H()}}},{key:"handleMouseUp",value:function(){this.activePoint=null}},{key:"applyCurves",value:function(t,e,n){var r=this.params.rgb;return t=u(r,t),e=u(r,e),n=u(r,n),l(this.params.red)||(t=u(this.params.red,t)),l(this.params.green)||(e=u(this.params.green,e)),l(this.params.blue)||(n=u(this.params.blue,n)),{r:t,g:e,b:n}}},{key:"applyCurvesToImage",value:function(t){for(var e=t.data,n=0;n<e.length;n+=4){var r=e[n]/255,a=e[n+1]/255,o=e[n+2]/255,i=this.applyCurves(r,a,o);e[n]=Math.round(255*i.r),e[n+1]=Math.round(255*i.g),e[n+2]=Math.round(255*i.b)}return t}}],e&&o(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),d=null;function h(t,e,n){t&&e&&(t.value=Y.currentLutParams.basic[n],e.textContent=Y.currentLutParams.basic[n].toFixed(2),t.addEventListener("input",(function(){Y.currentLutParams.basic[n]=parseFloat(t.value),e.textContent=Y.currentLutParams.basic[n].toFixed(2),H()})))}function f(t,e){return.5+(t-.5)*e}function m(t,e,n){t&&e&&(t.value=Y.currentLutParams.creative[n],e.textContent=Y.currentLutParams.creative[n].toFixed(1),t.addEventListener("input",(function(){Y.currentLutParams.creative[n]=parseFloat(t.value),e.textContent=Y.currentLutParams.creative[n].toFixed(1),H()})))}function v(t,e,n,r){var a=.2126*t+.7152*e+.0722*n,o=Math.max(t,e,n),i=Math.min(t,e,n),c=r*(1-(0===o?0:(o-i)/o));return{r:t=a+(t-a)*(1+c),g:e=a+(e-a)*(1+c),b:n=a+(n-a)*(1+c)}}function g(t,e,n,r){var a=.5*r;t=t*(1-a)+.5*a,e=e*(1-a)+.5*a,n=n*(1-a)+.5*a;var o=.1*r;return{r:t+=o,g:e+=o,b:n+=o}}function p(t,e){if(t){t.innerHTML="";var n=document.createElement("canvas");n.width=t.clientWidth||80,n.height=t.clientHeight||80,t.appendChild(n),t.style.background="conic-gradient(red, yellow, lime, cyan, blue, magenta, red)",t.style.backgroundImage="radial-gradient(circle at center, white 0%, rgba(255, 255, 255, 0) 70%), conic-gradient(red, yellow, lime, cyan, blue, magenta, red)";var r=document.createElement("div");r.className="wheel-indicator",t.appendChild(r);var a=Y.currentLutParams.colorWheels[e],o=t.clientWidth/2,i=t.clientHeight/2,c=Math.min(o,i)-2,l=(a.r-128)/128,u=(a.g-128)/128,s=(a.b-128)/128,d=Math.sqrt(l*l+u*u+s*s),h=0;(d=Math.min(1,d))>0&&(h=Math.atan2(u,l),s>Math.max(l,u)&&(h=Math.PI+Math.atan2(s,-l)),h<0&&(h+=2*Math.PI));var f=Math.cos(h)*d*c,m=Math.sin(h)*d*c;b(t,r,f,m);var v=!1;t.addEventListener("mousedown",(function(t){v=!0,g(t)})),document.addEventListener("mousemove",(function(t){v&&g(t)})),document.addEventListener("mouseup",(function(){v=!1})),t.addEventListener("click",g)}function g(n){var a=t.getBoundingClientRect(),o=a.width/2,i=a.height/2,c=n.clientX-a.left-o,l=n.clientY-a.top-i,u=Math.sqrt(c*c+l*l),s=Math.min(o,i)-2;if(u<=s){b(t,r,c,l);var d=Math.atan2(l,c);d<0&&(d+=2*Math.PI);var h=u/s,f=function(t,e){var n,r,a,o=Math.floor(6*t),i=6*t-o,c=1*(1-e),l=1*(1-i*e),u=1*(1-(1-i)*e);switch(o%6){case 0:n=1,r=u,a=c;break;case 1:n=l,r=1,a=c;break;case 2:n=c,r=1,a=u;break;case 3:n=c,r=l,a=1;break;case 4:n=u,r=c,a=1;break;case 5:n=1,r=c,a=l}return{r:Math.round(255*n),g:Math.round(255*r),b:Math.round(255*a)}}(d/(2*Math.PI),h),m=Math.round(128+(f.r-128)*h),v=Math.round(128+(f.g-128)*h),g=Math.round(128+(f.b-128)*h);Y.currentLutParams.colorWheels[e]={r:m,g:v,b:g},H()}}}function y(){Y.currentLutParams.colorWheels.shadowTint={r:128,g:128,b:128},Y.currentLutParams.colorWheels.highlightTint={r:128,g:128,b:128},Y.currentLutParams.colorWheels.tintBalance=0;var t=document.getElementById("tint-balance"),e=document.getElementById("tint-balance-value");t&&(t.value=0),e&&(e.textContent="0.0");var n=document.getElementById("shadow-color-wheel"),r=document.getElementById("highlight-color-wheel");if(n){var a=n.querySelector(".wheel-indicator");a&&b(n,a,0,0)}if(r){var o=r.querySelector(".wheel-indicator");o&&b(r,o,0,0)}H()}function b(t,e,n,r){var a=t.clientWidth/2,o=t.clientHeight/2;e.style.left="".concat(a+n,"px"),e.style.top="".concat(o+r,"px")}function w(t,e,n,r,a,o){var i=.2126*t+.7152*e+.0722*n,c=Math.pow(1-i,2),l=Math.pow(i,2);return o>0?(c*=1-o,l=l*(1-o)+o):o<0&&(l*=1+o,c=c*(1+o)-o),t+=(r.r-128)/128*c*.5,e+=(r.g-128)/128*c*.5,n+=(r.b-128)/128*c*.5,{r:t+=(a.r-128)/128*l*.5,g:e+=(a.g-128)/128*l*.5,b:n+=(a.b-128)/128*l*.5}}var L=50;function E(){console.log("Image upload button clicked"),window.electronAPI&&"function"==typeof window.electronAPI.openFileDialog?window.electronAPI.openFileDialog({properties:["openFile"],filters:[{name:"Images",extensions:["jpg","jpeg","png","bmp"]}]}).then((function(t){t&&(console.log("Selected image:",t),Y.originalImageElement.src="file://".concat(t))})).catch((function(t){console.error("Error in Electron file dialog:",t),x()})):(console.log("Using browser file input"),x())}function x(){var t=document.createElement("input");t.type="file",t.accept="image/*",t.addEventListener("change",(function(t){if(this.files&&this.files[0]){var e=this.files[0];console.log("Selected file:",e.name);var n=new FileReader;n.onload=function(t){Y.originalImageElement.src=t.target.result},n.readAsDataURL(e)}})),t.click()}function I(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=document.getElementById("view-split"),r=document.getElementById("view-before"),a=document.getElementById("view-after"),o=document.getElementById("original-image-container"),i=document.getElementById("comparison-slider"),c=document.getElementById("vertical-divider");switch(n.classList.remove("active"),r.classList.remove("active"),a.classList.remove("active"),t){case"split":n.classList.add("active"),e&&(L=50),o.style.clipPath="inset(0 ".concat(100-L,"% 0 0)"),c.style.left="".concat(L,"%"),i.style.left="".concat(L,"%"),i.style.display="block",o.style.display="block",c.style.display="block";break;case"before":r.classList.add("active"),o.style.clipPath="inset(0 0 0 0)",i.style.display="none",c.style.display="none",o.style.display="block";break;case"after":a.classList.add("active"),o.style.display="none",i.style.display="none",c.style.display="none"}}function B(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return P(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var M={custom:{contrast:1.2,saturation:1.15,redBalance:1.05,greenBalance:.95,blueBalance:1.1,shadowsShift:[.05,0,-.05],highlightsShift:[.03,.03,0]},warm:{contrast:1.1,saturation:.9,redBalance:1.15,greenBalance:.95,blueBalance:.85,shadowsShift:[.08,.02,-.05],highlightsShift:[.05,0,-.05]},cool:{contrast:1.3,saturation:.85,redBalance:.9,greenBalance:1,blueBalance:1.2,shadowsShift:[-.03,0,.08],highlightsShift:[0,0,.03]},bw:{contrast:1.5,saturation:0,redBalance:.33,greenBalance:.33,blueBalance:.33,shadowsShift:[-.05,-.05,-.05],highlightsShift:[.05,.05,.05]},film:{contrast:.9,saturation:.8,redBalance:1.1,greenBalance:1.05,blueBalance:.9,shadowsShift:[.1,.05,0],highlightsShift:[-.02,-.02,.05]}},C={};function S(t,e){var n=document.getElementById(t),r=document.getElementById("".concat(t,"-value"));n&&(n.value=e),r&&(r.textContent=e.toFixed(2))}function k(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=document.getElementById("lut-preview");if(e){var n="# LUT Preview will be generated here";window.generateCubeLUT&&(n=window.generateCubeLUT()),e.textContent=t?n:n.slice(0,500)+"..."}}function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,r=document.querySelector(".toast-container");r||((r=document.createElement("div")).className="toast-container",document.body.appendChild(r));var a=document.createElement("div");return a.className="toast toast-".concat(e),a.textContent=t,r.appendChild(a),setTimeout((function(){a.classList.add("show")}),10),setTimeout((function(){a.classList.remove("show"),setTimeout((function(){r.removeChild(a)}),300)}),n),a}function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function T(){T=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof p?e:p,i=Object.create(o.prototype),c=new k(r||[]);return a(i,"_invoke",{value:P(t,n,c)}),i}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",f="suspendedYield",m="executing",v="completed",g={};function p(){}function y(){}function b(){}var w={};u(w,i,(function(){return this}));var L=Object.getPrototypeOf,E=L&&L(L(O([])));E&&E!==n&&r.call(E,i)&&(w=E);var x=b.prototype=p.prototype=Object.create(w);function I(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function B(t,e){function n(a,o,i,c){var l=d(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==j(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return n("throw",t,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function P(e,n,r){var a=h;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===v){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var l=M(c,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=m;var u=d(e,n,r);if("normal"===u.type){if(a=r.done?v:f,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=v,r.method="throw",r.arg=u.arg)}}}function M(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(j(e)+" is not iterable")}return y.prototype=b,a(x,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},I(B.prototype),u(B.prototype,c,(function(){return this})),e.AsyncIterator=B,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new B(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},I(x),u(x,l,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function A(t,e,n,r,a,o,i){try{var c=t[o](i),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,a)}function F(t){return _.apply(this,arguments)}function _(){return t=T().mark((function t(e){var n,r,a,o,i,c,l=arguments;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:"lut.cube",console.log("Saving LUT file"),t.prev=2,r=n.endsWith(".cube")?n:"".concat(n,".cube"),!window.electronAPI||"function"!=typeof window.electronAPI.saveLut){t.next=13;break}return t.next=7,window.electronAPI.saveLut({content:e,defaultPath:r});case 7:if(!(a=t.sent)){t.next=11;break}return O("LUT saved to: ".concat(a),"success"),t.abrupt("return",a);case 11:t.next=24;break;case 13:return o=new Blob([e],{type:"text/plain"}),i=URL.createObjectURL(o),(c=document.createElement("a")).href=i,c.download=r,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(i),O("LUT downloaded as ".concat(r),"success"),t.abrupt("return",r);case 24:t.next=31;break;case 26:return t.prev=26,t.t0=t.catch(2),console.error("Error saving LUT:",t.t0),O("Failed to save LUT file","error"),t.abrupt("return",null);case 31:case"end":return t.stop()}}),t,null,[[2,26]])})),_=function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){A(o,r,a,i,c,"next",t)}function c(t){A(o,r,a,i,c,"throw",t)}i(void 0)}))},_.apply(this,arguments);var t}function U(){var t=Y.currentLutParams,e=t.size||32,n="";n+="# ".concat(t.title,"\n"),n+="# Generated by LOTS App\n\n",n+="LUT_3D_SIZE ".concat(e,"\n"),n+="DOMAIN_MIN 0.0 0.0 0.0\n",n+="DOMAIN_MAX 1.0 1.0 1.0\n\n";for(var r=1/(e-1),a=0;a<e;a++)for(var o=0;o<e;o++)for(var i=0;i<e;i++){var c=i*r,l=o*r,u=a*r;if("basic"===Y.activeMode){var s=N(c,l,u);c=s.r,l=s.g,u=s.b}else{var d=z(c,l,u);c=d.r,l=d.g,u=d.b}c=Math.min(1,Math.max(0,c)),l=Math.min(1,Math.max(0,l)),u=Math.min(1,Math.max(0,u)),n+="".concat(c.toFixed(6)," ").concat(l.toFixed(6)," ").concat(u.toFixed(6),"\n")}return n}function N(t,e,n){var r=Y.currentLutParams.basic||{};if(t=f(t,r.contrast||1),e=f(e,r.contrast||1),n=f(n,r.contrast||1),t*=r.redBalance||1,e*=r.greenBalance||1,n*=r.blueBalance||1,r.shadowsShift&&r.highlightsShift){var a=Math.pow(1-Math.max(t,Math.max(e,n)),2),o=Math.pow(Math.max(t,Math.max(e,n)),2);t+=r.shadowsShift[0]*a+r.highlightsShift[0]*o,e+=r.shadowsShift[1]*a+r.highlightsShift[1]*o,n+=r.shadowsShift[2]*a+r.highlightsShift[2]*o}if(void 0!==r.saturation&&1!==r.saturation){var i=.2126*t+.7152*e+.0722*n;t=i+r.saturation*(t-i),e=i+r.saturation*(e-i),n=i+r.saturation*(n-i)}return{r:t,g:e,b:n}}function z(t,e,n){var r=Y.currentLutParams;if(r.lumetri&&(0!==r.lumetri.temperature||0!==r.lumetri.tint)){var a=function(t,e,n,r,a){return(r<0||r>0)&&(t*=1-.4*r,e*=1-.2*r,n*=1+.6*r),(a>0||a<0)&&(t*=1+.3*a,e*=1-.3*a,n*=1+.3*a),{r:t,g:e,b:n}}(t,e,n,r.lumetri.temperature/150,r.lumetri.tint/150);t=a.r,e=a.g,n=a.b}if(r.lumetri){if(0!==r.lumetri.exposure){var o=Math.pow(2,r.lumetri.exposure);t*=o,e*=o,n*=o}if(0!==r.lumetri.contrast){var i=1+r.lumetri.contrast/150*1.5;t=f(t,i),e=f(e,i),n=f(n,i)}}if(r.lumetri){var c=function(t,e,n,r,a,o,i){var c=.2126*t+.7152*e+.0722*n,l=Math.pow(c,2)*r+Math.pow(1-c,2)*a+Math.pow(c,4)*o+Math.pow(1-c,4)*i;return{r:t+=l,g:e+=l,b:n+=l}}(t,e,n,r.lumetri.highlights/150*1.5,r.lumetri.shadows/150*1.5,r.lumetri.whites/150*1.5,r.lumetri.blacks/150*1.5);t=c.r,e=c.g,n=c.b}if(r.colorWheels){var s=r.colorWheels.shadowTint,d=r.colorWheels.highlightTint,h=r.colorWheels.tintBalance/150;if(128!==s.r||128!==s.g||128!==s.b||128!==d.r||128!==d.g||128!==d.b||0!==h){var m=w(t,e,n,s,d,h);t=m.r,e=m.g,n=m.b}}if(r.curves){var v=r.curves.rgb;v&&(t=u(v,t),e=u(v,e),n=u(v,n)),r.curves.red&&!l(r.curves.red)&&(t=u(r.curves.red,t)),r.curves.green&&!l(r.curves.green)&&(e=u(r.curves.green,e)),r.curves.blue&&!l(r.curves.blue)&&(n=u(r.curves.blue,n))}if(r.creative){if(0!==r.creative.vibrance){var p=r.creative.vibrance/150,y=.2126*t+.7152*e+.0722*n,b=Math.max(t,e,n),L=Math.min(t,e,n),E=p*(1-(0===b?0:(b-L)/b));t=y+(t-y)*(1+E),e=y+(e-y)*(1+E),n=y+(n-y)*(1+E)}if(r.creative.fadedFilm>0){var x=g(t,e,n,r.creative.fadedFilm/100);t=x.r,e=x.g,n=x.b}}return{r:t,g:e,b:n}}function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function D(){D=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof p?e:p,i=Object.create(o.prototype),c=new k(r||[]);return a(i,"_invoke",{value:P(t,n,c)}),i}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",f="suspendedYield",m="executing",v="completed",g={};function p(){}function y(){}function b(){}var w={};u(w,i,(function(){return this}));var L=Object.getPrototypeOf,E=L&&L(L(O([])));E&&E!==n&&r.call(E,i)&&(w=E);var x=b.prototype=p.prototype=Object.create(w);function I(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function B(t,e){function n(a,o,i,c){var l=d(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==W(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return n("throw",t,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function P(e,n,r){var a=h;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===v){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var l=M(c,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=m;var u=d(e,n,r);if("normal"===u.type){if(a=r.done?v:f,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=v,r.method="throw",r.arg=u.arg)}}}function M(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(W(e)+" is not iterable")}return y.prototype=b,a(x,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},I(B.prototype),u(B.prototype,c,(function(){return this})),e.AsyncIterator=B,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new B(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},I(x),u(x,l,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function G(t,e,n,r,a,o,i){try{var c=t[o](i),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,a)}function R(){return q.apply(this,arguments)}function q(){return(t=D().mark((function t(){var e,n;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Exporting LUT"),t.prev=1,e=U(),n=X(Y.currentLutParams.title),t.next=6,F(e,n);case 6:t.sent?console.log("LUT exported successfully"):console.warn("LUT export was cancelled or failed"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.error("Error exporting LUT:",t.t0),O("Failed to export LUT: "+t.t0.message,"error");case 14:case"end":return t.stop()}}),t,null,[[1,10]])})),q=function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){G(o,r,a,i,c,"next",t)}function c(t){G(o,r,a,i,c,"throw",t)}i(void 0)}))}).apply(this,arguments);var t}function X(t){if(!t)return"lut.cube";var e=t.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_-]/g,"").toLowerCase();return e.endsWith(".cube")||(e+=".cube"),e}function J(t){return"basic"===Y.activeMode?function(t){if(console.log("Processing image with basic adjustments"),!t)return console.error("No image to process"),null;try{var e=document.createElement("canvas"),n=e.getContext("2d");e.width=t.naturalWidth,e.height=t.naturalHeight,n.drawImage(t,0,0);var r=n.getImageData(0,0,e.width,e.height);return function(t){for(var e=Y.currentLutParams.basic,n=t.data,r=0;r<n.length;r+=4){var a=n[r]/255,o=n[r+1]/255,i=n[r+2]/255;if(a=f(a,e.contrast),o=f(o,e.contrast),i=f(i,e.contrast),a*=e.redBalance,o*=e.greenBalance,i*=e.blueBalance,1!==e.saturation){var c=.2126*a+.7152*o+.0722*i;a=c+e.saturation*(a-c),o=c+e.saturation*(o-c),i=c+e.saturation*(i-c)}if(e.shadowsShift&&e.highlightsShift){var l=Math.pow(1-Math.max(a,Math.max(o,i)),2),u=Math.pow(Math.max(a,Math.max(o,i)),2);a+=e.shadowsShift[0]*l+e.highlightsShift[0]*u,o+=e.shadowsShift[1]*l+e.highlightsShift[1]*u,i+=e.shadowsShift[2]*l+e.highlightsShift[2]*u}a=Math.min(1,Math.max(0,a)),o=Math.min(1,Math.max(0,o)),i=Math.min(1,Math.max(0,i)),n[r]=Math.round(255*a),n[r+1]=Math.round(255*o),n[r+2]=Math.round(255*i)}}(r),n.putImageData(r,0,0),e.toDataURL("image/jpeg",1)}catch(t){return console.error("Error processing image:",t),null}}(t):function(t){if(console.log("Processing image with advanced adjustments"),!t)return console.error("No image to process"),null;try{var e=document.createElement("canvas"),n=e.getContext("2d");e.width=t.naturalWidth,e.height=t.naturalHeight,n.drawImage(t,0,0);var r=n.getImageData(0,0,e.width,e.height);return function(t){for(var e=Y.currentLutParams.colorWheels,n=t.data,r=0;r<n.length;r+=4){var a=w(n[r]/255,n[r+1]/255,n[r+2]/255,e.shadowTint,e.highlightTint,e.tintBalance/150);n[r]=Math.round(255*Math.min(1,Math.max(0,a.r))),n[r+1]=Math.round(255*Math.min(1,Math.max(0,a.g))),n[r+2]=Math.round(255*Math.min(1,Math.max(0,a.b)))}}(r),function(t){for(var e=Y.currentLutParams.creative,n=t.data,r=0;r<n.length;r+=4){var a=n[r]/255,o=n[r+1]/255,i=n[r+2]/255;if(0!==e.vibrance){var c=v(a,o,i,e.vibrance/150);a=c.r,o=c.g,i=c.b}if(e.fadedFilm>0){var l=g(a,o,i,e.fadedFilm/100);a=l.r,o=l.g,i=l.b}a=Math.min(1,Math.max(0,a)),o=Math.min(1,Math.max(0,o)),i=Math.min(1,Math.max(0,i)),n[r]=Math.round(255*a),n[r+1]=Math.round(255*o),n[r+2]=Math.round(255*i)}}(r),Y.curvesPanel&&function(t){d&&d.applyCurvesToImage(t)}(r),n.putImageData(r,0,0),e.toDataURL("image/jpeg",1)}catch(t){return console.error("Error processing advanced image:",t),null}}(t)}var Y={activeMode:"basic",originalImage:null,processedImage:null,currentLutParams:{size:32,title:"Signature Look",contrast:1.2,saturation:1.15,redBalance:1.05,greenBalance:.95,blueBalance:1.1,shadowsShift:[.05,0,-.05],highlightsShift:[.03,.03,0]}};function H(){if(Y.originalImage){console.log("Applying image adjustments");try{var t=J(Y.originalImageElement);t&&Y.processedImageElement&&(Y.processedImageElement.src=t)}catch(t){console.error("Error processing image:",t)}}}window.applyImageAdjustments=H,document.addEventListener("DOMContentLoaded",(function(){var t,e,n,r,a,o,i,l,u,f,v,g,b,w;console.log("LOTS App initializing..."),window.appState=Y,console.log("Initializing UI Elements"),v=document.getElementById("view-code-btn"),g=document.getElementById("view-code-btn-advanced"),b=document.getElementById("code-modal"),w=document.getElementById("close-modal-btn"),v&&b&&v.addEventListener("click",(function(){k(!0),b.style.display="block"})),g&&b&&g.addEventListener("click",(function(){k(!0),b.style.display="block"})),w&&w.addEventListener("click",(function(){document.querySelectorAll(".modal").forEach((function(t){t.style.display="none"}))})),window.addEventListener("click",(function(t){document.querySelectorAll(".modal").forEach((function(e){t.target===e&&(e.style.display="none")}))})),[{toggle:"basic-correction-toggle",content:"basic-correction-section",expanded:!0},{toggle:"creative-toggle",content:"creative-section",expanded:!1},{toggle:"color-wheels-toggle",content:"color-wheels-section",expanded:!1},{toggle:"curves-toggle",content:"curves-section",expanded:!1}].forEach((function(t){var e=document.getElementById(t.toggle),n=document.getElementById(t.content);e&&n&&(t.expanded&&(e.classList.add("expanded"),n.classList.add("expanded")),e.addEventListener("click",(function(){e.classList.toggle("expanded"),n.classList.toggle("expanded")})))})),l=document.getElementById("minimize-btn"),u=document.getElementById("maximize-btn"),f=document.getElementById("close-btn"),l&&l.addEventListener("click",(function(){window.electronAPI&&window.electronAPI.windowControl("minimize")})),u&&u.addEventListener("click",(function(){window.electronAPI&&window.electronAPI.windowControl("maximize")})),f&&f.addEventListener("click",(function(){window.electronAPI&&window.electronAPI.windowControl("close")})),function(){console.log("Initializing Basic Corrections"),Y.currentLutParams.basic||(Y.currentLutParams.basic={contrast:1.2,saturation:1.15,redBalance:1.05,greenBalance:.95,blueBalance:1.1});var t,e,n=document.getElementById("contrast"),r=document.getElementById("saturation"),a=document.getElementById("red-balance"),o=document.getElementById("green-balance"),i=document.getElementById("blue-balance"),c=document.getElementById("contrast-value"),l=document.getElementById("saturation-value"),u=document.getElementById("red-balance-value"),s=document.getElementById("green-balance-value"),d=document.getElementById("blue-balance-value");h(n,c,"contrast"),h(r,l,"saturation"),h(a,u,"redBalance"),h(o,s,"greenBalance"),h(i,d,"blueBalance"),t=document.getElementById("title"),e=document.getElementById("lut-size"),t&&(t.value=Y.currentLutParams.title||"Signature Look",t.addEventListener("input",(function(){Y.currentLutParams.title=t.value}))),e&&(e.value=Y.currentLutParams.size||"32",e.addEventListener("change",(function(){Y.currentLutParams.size=parseInt(e.value)})))}(),function(){console.log("Initializing Creative Effects"),Y.currentLutParams.creative||(Y.currentLutParams.creative={fadedFilm:0,vibrance:0});var t,e,n=document.getElementById("faded-film"),r=document.getElementById("vibrance"),a=document.getElementById("faded-film-value"),o=document.getElementById("vibrance-value");m(n,a,"fadedFilm"),m(r,o,"vibrance"),t=document.getElementById("creative-toggle"),e=document.getElementById("creative-section"),t&&e&&t.addEventListener("click",(function(){t.classList.toggle("expanded"),e.classList.toggle("expanded")}))}(),function(){console.log("Initializing Color Wheels"),Y.currentLutParams.colorWheels||(Y.currentLutParams.colorWheels={shadowTint:{r:128,g:128,b:128},highlightTint:{r:128,g:128,b:128},tintBalance:0});var t=document.getElementById("shadow-color-wheel"),e=document.getElementById("highlight-color-wheel"),n=document.getElementById("tint-balance"),r=document.getElementById("tint-balance-value");t&&p(t,"shadowTint"),e&&p(e,"highlightTint"),n&&r&&(n.value=Y.currentLutParams.colorWheels.tintBalance,r.textContent=Y.currentLutParams.colorWheels.tintBalance.toFixed(1),n.addEventListener("input",(function(){Y.currentLutParams.colorWheels.tintBalance=parseFloat(n.value),r.textContent=Y.currentLutParams.colorWheels.tintBalance.toFixed(1),H()})));var a,o,i=document.querySelector('.reset-btn[data-section="colorWheels"]');i&&i.addEventListener("click",y),a=document.getElementById("color-wheels-toggle"),o=document.getElementById("color-wheels-section"),a&&o&&a.addEventListener("click",(function(){a.classList.toggle("expanded"),o.classList.toggle("expanded")}))}(),console.log("Setting up Curves Panel"),Y.currentLutParams.curves||(Y.currentLutParams.curves=JSON.parse(JSON.stringify(c))),d=new s(Y.currentLutParams.curves),o=document.getElementById("curves-toggle"),i=document.getElementById("curves-section"),o&&i&&o.addEventListener("click",(function(){o.classList.toggle("expanded"),i.classList.toggle("expanded")})),"complete"===document.readyState||"interactive"===document.readyState?setTimeout((function(){return d.init()}),0):document.addEventListener("DOMContentLoaded",(function(){return d.init()})),Y.curvesPanel=d,console.log("Initializing Image Comparison"),function(){console.log("Initializing Preview Controller");var t,e,n,r=document.getElementById("original-image"),a=document.getElementById("processed-image"),o=document.getElementById("original-placeholder"),i=document.getElementById("comparison-container"),c=document.getElementById("image-upload-btn");Y.originalImageElement=r,Y.processedImageElement=a,t=document.getElementById("view-split"),e=document.getElementById("view-before"),n=document.getElementById("view-after"),t&&t.addEventListener("click",(function(){I("split")})),e&&e.addEventListener("click",(function(){I("before")})),n&&n.addEventListener("click",(function(){I("after")})),c&&c.addEventListener("click",E),r&&(r.onload=function(){console.log("Image loaded successfully"),Y.originalImage=r,Y.processedImage=a,o&&(o.style.display="none"),i&&(i.style.display="block"),function(){var t=document.getElementById("comparison-container"),e=document.getElementById("original-image-container"),n=document.getElementById("comparison-slider"),r=document.getElementById("vertical-divider"),a=!1,o=0,i=50;function c(t){t=Math.max(0,Math.min(100,t)),L=t,e.style.clipPath="inset(0 ".concat(100-t,"% 0 0)"),n.style.left=t+"%",r.style.left=t+"%"}n.addEventListener("mousedown",(function(t){a=!0,o=t.clientX;var e=parseFloat(n.style.left)||L;i=e,t.preventDefault()})),document.addEventListener("mousemove",(function(e){if(a){var n=t.getBoundingClientRect(),r=(e.clientX-o)/n.width*100;c(i+r),e.preventDefault()}})),document.addEventListener("mouseup",(function(){a=!1})),n.addEventListener("touchstart",(function(t){a=!0,o=t.touches[0].clientX;var e=parseFloat(n.style.left)||L;i=e,t.preventDefault()})),document.addEventListener("touchmove",(function(e){if(a){var n=t.getBoundingClientRect(),r=(e.touches[0].clientX-o)/n.width*100;c(i+r),e.preventDefault()}})),document.addEventListener("touchend",(function(){a=!1})),t.addEventListener("click",(function(e){if(!e.target.closest(".toggle-view")&&!e.target.closest(".slider-handle")){var n=t.getBoundingClientRect();c((e.clientX-n.left)/n.width*100)}})),c(L)}(),H()})}(),function(){console.log("Initializing Presets");var t=document.querySelectorAll(".preset-btn");t.forEach((function(e){e.addEventListener("click",(function(){var n,r,a,o;t.forEach((function(t){return t.classList.remove("active")})),e.classList.add("active"),n=e.id.split("-")[1],(o=M[n]||C[n])?(console.log("Applying preset: ".concat(n)),Y.activePresetId=n,Y.currentLutParams.basic||(Y.currentLutParams.basic={}),Y.currentLutParams.basic.contrast=o.contrast,Y.currentLutParams.basic.saturation=o.saturation,Y.currentLutParams.basic.redBalance=o.redBalance,Y.currentLutParams.basic.greenBalance=o.greenBalance,Y.currentLutParams.basic.blueBalance=o.blueBalance,o.shadowsShift&&(Y.currentLutParams.basic.shadowsShift=B(o.shadowsShift)),o.highlightsShift&&(Y.currentLutParams.basic.highlightsShift=B(o.highlightsShift)),o.advanced&&(void 0!==(r=o.advanced).temperature&&Y.currentLutParams.lumetri&&(Y.currentLutParams.lumetri.temperature=r.temperature),void 0!==r.tint&&Y.currentLutParams.lumetri&&(Y.currentLutParams.lumetri.tint=r.tint)),S("contrast",(a=Y.currentLutParams.basic).contrast),S("saturation",a.saturation),S("red-balance",a.redBalance),S("green-balance",a.greenBalance),S("blue-balance",a.blueBalance),H()):console.warn("Preset '".concat(n,"' not found"))}))})),function(){try{var t=localStorage.getItem("lotsAppUserPresets");t&&(C=JSON.parse(t),console.log("Loaded user presets:",Object.keys(C)))}catch(t){console.error("Failed to load user presets:",t)}}()}(),console.log("Initializing File Service"),console.log("Initializing LUT Generator Service"),window.generateCubeLUT=U,console.log("Initializing Export Service"),r=document.getElementById("save-lut-btn"),a=document.getElementById("save-lut-btn-advanced"),r&&r.addEventListener("click",R),a&&a.addEventListener("click",R),t=document.getElementById("mode-toggle"),e=document.getElementById("basic-controls"),n=document.getElementById("advanced-controls"),t&&t.addEventListener("change",(function(){var t=this.checked;Y.activeMode=t?"advanced":"basic",e&&n&&(console.log("Switching to ".concat(Y.activeMode," mode")),e.style.display=t?"none":"block",n.style.display=t?"block":"none",Y.originalImage&&Y.processedImage&&H())})),function(){var t=document.getElementById("minimize-btn"),e=document.getElementById("maximize-btn"),n=document.getElementById("close-btn");t&&t.addEventListener("click",(function(){window.electronAPI&&window.electronAPI.windowControl("minimize")})),e&&e.addEventListener("click",(function(){window.electronAPI&&window.electronAPI.windowControl("maximize")})),n&&n.addEventListener("click",(function(){window.electronAPI&&window.electronAPI.windowControl("close")}))}(),console.log("LOTS App initialized successfully")}))})();
//# sourceMappingURL=bundle.js.map