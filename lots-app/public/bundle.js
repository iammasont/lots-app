(()=>{"use strict";var n={56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72:n=>{var e=[];function t(n){for(var t=-1,o=0;o<e.length;o++)if(e[o].identifier===n){t=o;break}return t}function o(n,o){for(var i={},a=[],s=0;s<n.length;s++){var l=n[s],c=o.base?l[0]+o.base:l[0],d=i[c]||0,u="".concat(c," ").concat(d);i[c]=d+1;var g=t(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==g)e[g].references++,e[g].updater(p);else{var h=r(p,o);o.byIndex=s,e.splice(s,0,{identifier:u,updater:h,references:1})}a.push(u)}return a}function r(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,r){var i=o(n=n||[],r=r||{});return function(n){n=n||[];for(var a=0;a<i.length;a++){var s=t(i[a]);e[s].references--}for(var l=o(n,r),c=0;c<i.length;c++){var d=t(i[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}i=l}}},77:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),i=t(314),a=t.n(i)()(r());a.push([n.id,".container {\n  display: flex;\n  height: 100vh;\n  width: 100%;\n}\n\n/* Sidebar with glass effect */\n.sidebar {\n  width: 280px;\n  background-color: rgba(20, 20, 20, 0.8);\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  padding: 24px 20px 20px;\n  height: 100%;\n  overflow-y: auto;\n  flex-shrink: 0;\n  box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);\n  border-right: 1px solid rgba(255, 255, 255, 0.1);\n  z-index: 10;\n}\n\n.brand {\n  margin-bottom: 24px;\n  font-size: 14px;\n  font-weight: 300;\n  text-transform: uppercase;\n  letter-spacing: 2px;\n  color: #fff;\n  opacity: 0.9;\n}\n\n/* Main content - shifted down for window controls */\n.main-content {\n  flex-grow: 1;\n  padding: 25px 0 0 0;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background-color: #111;\n  position: relative;\n}\n\n/* Mac-style window controls - moved to right corner */\n.window-controls {\n  position: fixed;\n  top: 12px;\n  right: 12px;\n  display: flex;\n  gap: 8px;\n  z-index: 1000;\n}\n\n/* Controls sections */\n.controls-section {\n  width: 100%;\n}\n\n/* Image preview */\n.preview-container {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  background-color: #0a0a0a;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n}\n\n.image-preview {\n  flex-grow: 1;\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n}\n\n.image-preview img {\n  max-width: 100%;\n  max-height: 100%;\n  object-fit: contain;\n}\n\n.placeholder-box {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #555;\n  font-size: 14px;\n  text-align: center;\n}\n\n.upload-button-container {\n  position: absolute;\n  top: 35px;\n  right: 20px;\n  z-index: 100;\n}\n\n.preset-buttons {\n  position: absolute;\n  top: 35px;\n  left: 20px;\n  z-index: 20;\n  display: flex;\n  flex-wrap: wrap;\n  padding: 8px;\n  background-color: rgba(0, 0, 0, 0.6);\n  border-radius: 4px;\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n}\n\n/* Mode toggle in sidebar */\n.mode-toggle-wrapper {\n  margin: 16px 0;\n  text-align: center;\n}\n\n.mode-toggle-container {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(20, 20, 20, 0.7);\n  border: 1px solid rgba(80, 80, 80, 0.4);\n  border-radius: 16px;\n  padding: 4px 8px;\n}\n\n.mode-basic-label,\n.mode-advanced-label {\n  font-size: 10px;\n  text-transform: uppercase;\n  color: #999;\n  margin: 0 8px;\n  letter-spacing: 0.5px;\n}\n\n/* Modal layout */\n.modal {\n  display: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.8);\n  z-index: 1000;\n  backdrop-filter: blur(5px);\n  -webkit-backdrop-filter: blur(5px);\n}\n\n.modal-content {\n  background-color: #1a1a1a;\n  margin: 10% auto;\n  padding: 0;\n  width: 80%;\n  max-width: 800px;\n  border-radius: 6px;\n  box-shadow: 0 5px 30px rgba(0, 0, 0, 0.6);\n  position: relative;\n  overflow: hidden;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px 20px;\n  background-color: #222;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.save-section {\n  margin-top: 20px;\n  padding-top: 20px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}",""]);const s=a},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},252:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),i=t(314),a=t.n(i)()(r());a.push([n.id,"/* Reset and base styles */\n*, *::before, *::after {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-family: 'Manrope', -apple-system, BlinkMacSystemFont, sans-serif;\n}\n\nhtml, body {\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background-color: #111111;\n  color: #f5f5f5;\n}\n\nbody {\n  font-weight: 300;\n  line-height: 1.5;\n  letter-spacing: 0.02em;\n  -webkit-font-smoothing: antialiased;\n}\n\n/* Prevent text selection */\nbody, html, * {\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  cursor: default;\n}\n\n/* Only allow text selection in specific elements */\ninput[type=\"text\"], textarea, pre, code {\n  user-select: text;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  -ms-user-select: text;\n  cursor: text;\n}\n\n/* Typography */\nh2 {\n  font-size: 13px;\n  font-weight: 500;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  color: #fff;\n  margin-bottom: 20px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n}\n\nh3 {\n  font-size: 11px;\n  font-weight: 400;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  color: #999;\n  margin: 20px 0 10px;\n}\n\nh4 {\n  font-size: 11px;\n  font-weight: 400;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  color: #999;\n  margin-bottom: 12px;\n}\n\nlabel {\n  display: block;\n  font-size: 12px;\n  margin-bottom: 6px;\n  font-weight: 400;\n  color: #ccc;\n}\n\n/* Scrollbar styling */\n::-webkit-scrollbar {\n  width: 6px;\n  height: 6px;\n}\n\n::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.3);\n}\n\n::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 3px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: rgba(255, 255, 255, 0.3);\n}",""]);const s=a},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",o=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),o&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),o&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,o,r,i){"string"==typeof n&&(n=[[null,n,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<n.length;c++){var d=[].concat(n[c]);o&&a[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),e.push(d))}},e}},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},578:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),i=t(314),a=t.n(i)()(r());a.push([n.id,'/* Transitions and animations */\n.fade-in {\n  animation: fadeIn 0.3s ease-in-out;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n.slide-in {\n  animation: slideIn 0.3s ease-out;\n}\n\n@keyframes slideIn {\n  from { transform: translateY(20px); opacity: 0; }\n  to { transform: translateY(0); opacity: 1; }\n}\n\n/* Transition for expandable sections */\n.section-content {\n  transition: max-height 0.3s ease, opacity 0.3s ease;\n}\n\n/* Hover effects */\nbutton, .preset-btn, .mode-slider, input[type="range"]::-webkit-slider-thumb {\n  transition: all 0.2s ease;\n}\n\n/* Slider movement animation */\n.comparison-slider, .vertical-divider, .original-image-container {\n  transition: left 0.1s ease-out;\n}\n\n/* Mode toggle animation */\n.mode-slider:before {\n  transition: transform 0.3s ease;\n}',""]);const s=a},601:n=>{n.exports=function(n){return n[1]}},617:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),i=t(314),a=t.n(i)()(r());a.push([n.id,"/* Theme colors and variables */\n:root {\n  --bg-primary: #111111;\n  --bg-secondary: #1a1a1a;\n  --bg-tertiary: rgba(20, 20, 20, 0.8);\n  \n  --text-primary: #f5f5f5;\n  --text-secondary: #ccc;\n  --text-muted: #999;\n  \n  --border-light: rgba(255, 255, 255, 0.1);\n  --border-medium: rgba(255, 255, 255, 0.2);\n  \n  --accent-primary: #00a0ff;\n  --accent-secondary: #27C93F;\n  \n  --control-bg: rgba(30, 30, 30, 0.7);\n  --control-border: rgba(100, 100, 100, 0.3);\n  \n  --overlay-dark: rgba(0, 0, 0, 0.6);\n  --overlay-light: rgba(255, 255, 255, 0.1);\n}\n\n/* You can add alternative themes here in the future */",""]);const s=a},647:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),i=t(314),a=t.n(i)()(r());a.push([n.id,'/* Form elements */\ninput[type="text"], select {\n  width: 100%;\n  background-color: rgba(30, 30, 30, 0.7);\n  border: 1px solid rgba(100, 100, 100, 0.3);\n  padding: 8px 12px;\n  color: #fff;\n  border-radius: 3px;\n  margin-bottom: 12px;\n  font-family: \'Inter\', sans-serif;\n  font-size: 13px;\n}\n\ninput[type="text"]:focus, select:focus {\n  outline: none;\n  border-color: rgba(255, 255, 255, 0.3);\n}\n\ninput[type="range"] {\n  width: 100%;\n  margin-bottom: 12px;\n  background-color: transparent;\n  -webkit-appearance: none;\n}\n\ninput[type="range"]::-webkit-slider-runnable-track {\n  height: 2px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 1px;\n}\n\ninput[type="range"]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  height: 12px;\n  width: 12px;\n  border-radius: 50%;\n  background: #fff;\n  margin-top: -5px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\ninput[type="range"]::-webkit-slider-thumb:hover {\n  background: #ddd;\n  transform: scale(1.1);\n}\n\n.parameter-value {\n  display: inline-block;\n  font-size: 12px;\n  color: #fff;\n  width: 40px;\n  text-align: right;\n  float: right;\n}\n\n/* Buttons */\nbutton {\n  background-color: rgba(255, 255, 255, 0.1);\n  color: #fff;\n  border: none;\n  padding: 8px 16px;\n  font-family: \'Inter\', sans-serif;\n  font-size: 12px;\n  font-weight: 400;\n  border-radius: 3px;\n  cursor: pointer;\n  transition: all 0.2s;\n  letter-spacing: 0.5px;\n  margin-right: 8px;\n  margin-bottom: 8px;\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n}\n\nbutton:hover {\n  background-color: rgba(255, 255, 255, 0.2);\n}\n\nbutton.primary {\n  background-color: rgba(255, 255, 255, 0.9);\n  color: #111;\n  font-weight: 500;\n}\n\nbutton.primary:hover {\n  background-color: #fff;\n}\n\n.preset-btn {\n  background-color: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  margin-right: 6px;\n  margin-bottom: 0;\n  padding: 6px 12px;\n  font-size: 11px;\n  color: #ccc;\n}\n\n.preset-btn.active {\n  background-color: rgba(255, 255, 255, 0.9);\n  color: #111;\n  border-color: rgba(255, 255, 255, 0.9);\n}\n\n/* Window control buttons */\n.window-btn {\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  border: none;\n  padding: 0;\n  margin: 0;\n  cursor: pointer;\n  transition: all 0.2s;\n  position: relative;\n}\n\n.window-btn:hover {\n  filter: brightness(0.8);\n}\n\n.close-btn {\n  background-color: #FF5F56;\n}\n\n.minimize-btn {\n  background-color: #FFBD2E;\n}\n\n.maximize-btn {\n  background-color: #27C93F;\n}\n\n/* Optional: Add the "x", "-", and "+" icons on hover */\n.close-btn:hover::before,\n.close-btn:hover::after {\n  content: \'\';\n  position: absolute;\n  width: 6px;\n  height: 1px;\n  background-color: rgba(0, 0, 0, 0.5);\n  top: 5.5px;\n  left: 3px;\n}\n\n.close-btn:hover::before {\n  transform: rotate(45deg);\n}\n\n.close-btn:hover::after {\n  transform: rotate(-45deg);\n}\n\n.minimize-btn:hover::before {\n  content: \'\';\n  position: absolute;\n  width: 6px;\n  height: 1px;\n  background-color: rgba(0, 0, 0, 0.5);\n  top: 5.5px;\n  left: 3px;\n}\n\n.maximize-btn:hover::before,\n.maximize-btn:hover::after {\n  content: \'\';\n  position: absolute;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.maximize-btn:hover::before {\n  width: 6px;\n  height: 1px;\n  top: 5.5px;\n  left: 3px;\n}\n\n.maximize-btn:hover::after {\n  width: 1px;\n  height: 6px;\n  top: 3px;\n  left: 5.5px;\n}\n\n/* Mode toggle switch */\n.mode-switch {\n  position: relative;\n  display: inline-block;\n  width: 36px;\n  height: 18px;\n}\n\n.mode-switch input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n.mode-slider {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #333;\n  transition: .3s;\n  border-radius: 10px;\n}\n\n.mode-slider:before {\n  position: absolute;\n  content: "";\n  height: 14px;\n  width: 14px;\n  left: 2px;\n  bottom: 2px;\n  background-color: white;\n  transition: .3s;\n  border-radius: 50%;\n}\n\n.mode-switch input:checked + .mode-slider:before {\n  transform: translateX(18px);\n}\n\n/* Modal components */\n.modal-header h3 {\n  margin: 0;\n  color: #fff;\n}\n\n.close-modal {\n  background: none;\n  border: none;\n  color: #999;\n  font-size: 24px;\n  cursor: pointer;\n  margin: 0;\n  padding: 0;\n}\n\n.close-modal:hover {\n  color: #fff;\n}\n\n/* LUT preview */\n.lut-preview {\n  height: 400px;\n  overflow: auto;\n  background-color: rgba(0, 0, 0, 0.5);\n  color: #888;\n  font-family: monospace;\n  font-size: 12px;\n  padding: 20px;\n  margin: 0;\n  border: none;\n}\n\n/* Section toggles for Lumetri */\n.lumetri-section h3 {\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.lumetri-section h3:after {\n  content: \'\';\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  border-right: 2px solid #999;\n  border-bottom: 2px solid #999;\n  margin-left: 5px;\n  transform: rotate(45deg);\n  transition: transform 0.3s;\n}\n\n.lumetri-section h3.expanded:after {\n  transform: rotate(-135deg);\n  margin-top: 5px;\n}\n\n/* Section content */\n.section-content {\n  max-height: 0;\n  overflow: hidden;\n  transition: max-height 0.3s ease;\n}\n\n.section-content.expanded {\n  max-height: 1000px;\n}',""]);const s=a},659:n=>{var e={};n.exports=function(n,t){var o=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},662:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),i=t(314),a=t.n(i)()(r());a.push([n.id,"/* Color wheels containers */\n.color-wheels-container {\n  display: flex;\n  justify-content: space-between;\n  margin: 15px 0;\n}\n\n.color-wheel-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.wheel-label {\n  font-size: 10px;\n  color: #aaa;\n  margin-bottom: 5px;\n}\n\n/* Updated color wheel styling */\n.color-wheel {\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n\n.wheel-indicator {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background-color: white;\n  border: 1px solid black;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  pointer-events: none;\n  z-index: 2;\n}\n\n/* Temperature value display styling */\n.kelvin-value {\n  font-size: 10px;\n  color: #777;\n  margin-left: 5px;\n}\n\n/* Curves editor styling */\n.curves-container {\n  margin: 15px 0;\n}\n\n.curve-channel-selector {\n  display: flex;\n  margin-bottom: 10px;\n}\n\n.curve-channel-btn {\n  background-color: rgba(30, 30, 30, 0.7);\n  color: #999;\n  border: 1px solid rgba(80, 80, 80, 0.3);\n  padding: 5px 10px;\n  font-size: 10px;\n  margin-right: 5px;\n  flex: 1;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.curve-channel-btn.active {\n  background-color: rgba(255, 255, 255, 0.9);\n  color: #111;\n}\n\n.curve-editor {\n  position: relative;\n  width: 240px;\n  height: 240px;\n  margin: 0 auto;\n  background-color: rgba(20, 20, 20, 0.7);\n  border: 1px solid rgba(80, 80, 80, 0.4);\n}\n\n#curve-canvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 10;\n}\n\n.curve-grid {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n\n.grid-line {\n  position: absolute;\n  background-color: rgba(255, 255, 255, 0.1);\n}\n\n.grid-line.horizontal {\n  width: 100%;\n  height: 1px;\n}\n\n.grid-line.vertical {\n  height: 100%;\n  width: 1px;\n}\n\n.curve-label {\n  position: absolute;\n  font-size: 9px;\n  color: rgba(255, 255, 255, 0.5);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.curve-label.shadows {\n  bottom: 5px;\n  left: 5px;\n}\n\n.curve-label.midtones {\n  bottom: 5px;\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n.curve-label.highlights {\n  bottom: 5px;\n  right: 5px;\n}\n\n.curve-point {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: white;\n  border: 1px solid black;\n  position: absolute;\n  transform: translate(-50%, -50%);\n  cursor: move;\n  z-index: 20;\n}\n\n.curve-point.active {\n  background-color: #00a0ff;\n}",""]);const s=a},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,r&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(o,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},896:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),i=t(314),a=t.n(i)()(r());a.push([n.id,"/* Custom image comparison component with correct masking */\n.comparison-container {\n    width: 100%;\n    height: 100%;\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .comparison-wrapper {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n  \n  /* The processed image is the base layer covering the entire container */\n  .processed-image-container {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 1;\n  }\n  \n  /* The original image is positioned on top, but clipped */\n  .original-image-container {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 2;\n    /* Clip only shows left side of the original image */\n    clip-path: inset(0 50% 0 0);\n    border-right: none; /* Remove the right border since we have a divider now */\n  }\n  \n  /* Both images fill their containers */\n  .processed-image-container img,\n  .original-image-container img {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n  }\n  \n  /* Vertical divider line */\n  .vertical-divider {\n    position: absolute;\n    top: 0;\n    left: 50%; /* Default position */\n    width: 2px;\n    height: 100%;\n    background-color: white;\n    z-index: 3;\n    pointer-events: none; /* So it doesn't interfere with slider interaction */\n    box-shadow: 0 0 5px rgba(0, 0, 0, 0.5); /* Add shadow for better visibility */\n  }\n  \n  /* The slider controls the dividing line position */\n  .comparison-slider {\n    position: absolute;\n    top: 0;\n    left: 50%; /* Default position */\n    width: 2px;\n    height: 100%;\n    z-index: 3;\n    cursor: ew-resize;\n  }\n  \n  .slider-handle {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 40px;\n    height: 40px;\n    background-color: white;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n    cursor: ew-resize;\n    z-index: 5; /* Increased z-index to appear above the divider */\n  }\n  \n  .slider-handle::after {\n    content: '↔';\n    font-size: 16px;\n    color: #111;\n  }\n  \n  .image-label {\n    position: absolute;\n    background-color: rgba(0, 0, 0, 0.6);\n    color: #fff;\n    padding: 6px 12px;\n    border-radius: 4px;\n    font-size: 12px;\n    letter-spacing: 1px;\n    text-transform: uppercase;\n    font-weight: 600;\n    pointer-events: none;\n    top: 15px;\n    z-index: 5;\n  }\n  \n  .before-label {\n    left: 15px;\n  }\n  \n  .after-label {\n    right: 15px;\n  }\n  \n  /* Toggle view controls */\n  .toggle-view {\n    position: absolute;\n    bottom: 16px;\n    left: 50%;\n    transform: translateX(-50%);\n    z-index: 10;\n    background-color: rgba(0, 0, 0, 0.7);\n    border-radius: 20px;\n    padding: 4px;\n    display: flex;\n    backdrop-filter: blur(5px);\n    -webkit-backdrop-filter: blur(5px);\n  }\n  \n  .toggle-view button {\n    background: transparent;\n    border: none;\n    color: #999;\n    font-size: 11px;\n    margin: 0;\n    padding: 4px 12px;\n    border-radius: 16px;\n  }\n  \n  .toggle-view button.active {\n    background-color: rgba(255, 255, 255, 0.9);\n    color: #111;\n  }",""]);const s=a}},e={};function t(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={id:o,exports:{}};return n[o](i,i.exports,t),i.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0,t.d({},{XJ:()=>Q,C_:()=>nn});var o=t(72),r=t.n(o),i=t(825),a=t.n(i),s=t(659),l=t.n(s),c=t(56),d=t.n(c),u=t(540),g=t.n(u),p=t(113),h=t.n(p),m=t(252),b={};b.styleTagTransform=h(),b.setAttributes=d(),b.insert=l().bind(null,"head"),b.domAPI=a(),b.insertStyleElement=g(),r()(m.A,b),m.A&&m.A.locals&&m.A.locals;var f=t(77),v={};v.styleTagTransform=h(),v.setAttributes=d(),v.insert=l().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=g(),r()(f.A,v),f.A&&f.A.locals&&f.A.locals;var x=t(647),y={};y.styleTagTransform=h(),y.setAttributes=d(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=g(),r()(x.A,y),x.A&&x.A.locals&&x.A.locals;var w=t(896),E={};E.styleTagTransform=h(),E.setAttributes=d(),E.insert=l().bind(null,"head"),E.domAPI=a(),E.insertStyleElement=g(),r()(w.A,E),w.A&&w.A.locals&&w.A.locals;var I=t(662),L={};L.styleTagTransform=h(),L.setAttributes=d(),L.insert=l().bind(null,"head"),L.domAPI=a(),L.insertStyleElement=g(),r()(I.A,L),I.A&&I.A.locals&&I.A.locals;var k=t(617),B={};B.styleTagTransform=h(),B.setAttributes=d(),B.insert=l().bind(null,"head"),B.domAPI=a(),B.insertStyleElement=g(),r()(k.A,B),k.A&&k.A.locals&&k.A.locals;var C=t(578),P={};P.styleTagTransform=h(),P.setAttributes=d(),P.insert=l().bind(null,"head"),P.domAPI=a(),P.insertStyleElement=g(),r()(C.A,P),C.A&&C.A.locals&&C.A.locals;const M={rgb:[{x:0,y:0},{x:.25,y:.25},{x:.5,y:.5},{x:.75,y:.75},{x:1,y:1}],red:[{x:0,y:0},{x:.25,y:.25},{x:.5,y:.5},{x:.75,y:.75},{x:1,y:1}],green:[{x:0,y:0},{x:.25,y:.25},{x:.5,y:.5},{x:.75,y:.75},{x:1,y:1}],blue:[{x:0,y:0},{x:.25,y:.25},{x:.5,y:.5},{x:.75,y:.75},{x:1,y:1}],currentChannel:"rgb"};function A(n){for(let e=0;e<n.length;e++){const t=n[e].x;if(Math.abs(n[e].y-t)>.01)return!1}return!0}function S(n,e){if(e<=0)return n[0].y;if(e>=1)return n[n.length-1].y;let t=0;for(;t<n.length-1&&n[t+1].x<e;)t++;const o=n[t],r=n[t+1],i=(e-o.x)/(r.x-o.x);return o.y+i*(r.y-o.y)}class z{constructor(n={}){this.params={...JSON.parse(JSON.stringify(M)),...n},this.curveCanvas=null,this.curveCtx=null,this.channelButtons={},this.activePoint=null,this.init=this.init.bind(this),this.drawCurve=this.drawCurve.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.resetCurve=this.resetCurve.bind(this)}init(){console.log("Initializing Curves Panel"),this.curveCanvas=document.getElementById("curve-canvas"),this.curveCanvas?(this.curveCtx=this.curveCanvas.getContext("2d"),this.channelButtons={rgb:document.getElementById("curve-rgb"),red:document.getElementById("curve-red"),green:document.getElementById("curve-green"),blue:document.getElementById("curve-blue")},this.setupEvents(),this.updateChannelButtonUI(),this.drawCurve()):console.warn("Curve canvas not found")}setupEvents(){if(!this.curveCanvas)return;this.curveCanvas.addEventListener("mousedown",this.handleMouseDown),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp);for(const n in this.channelButtons){const e=this.channelButtons[n];e&&e.addEventListener("click",(()=>{this.params.currentChannel=n,this.updateChannelButtonUI(),this.drawCurve()}))}const n=document.getElementById("reset-curve-btn");n&&n.addEventListener("click",this.resetCurve)}updateChannelButtonUI(){for(const n in this.channelButtons){const e=this.channelButtons[n];e&&(n===this.params.currentChannel?e.classList.add("active"):e.classList.remove("active"))}}resetCurve(){console.log("Resetting curve"),this.params[this.params.currentChannel]=JSON.parse(JSON.stringify(M[this.params.currentChannel])),this.drawCurve(),nn()}drawCurve(){if(!this.curveCanvas||!this.curveCtx)return void console.warn("Canvas not ready for drawing");const n=this.curveCanvas.width,e=this.curveCanvas.height;this.curveCtx.clearRect(0,0,n,e);const t=this.params[this.params.currentChannel];let o;switch(this.curveCtx.fillStyle="rgba(20, 20, 20, 0.3)",this.curveCtx.fillRect(0,0,n,e),this.params.currentChannel){case"red":o="rgba(255, 100, 100, 0.8)";break;case"green":o="rgba(100, 255, 100, 0.8)";break;case"blue":o="rgba(100, 100, 255, 0.8)";break;default:o="rgba(255, 255, 255, 0.8)"}this.curveCtx.beginPath(),this.curveCtx.moveTo(t[0].x*n,(1-t[0].y)*e);for(let o=1;o<t.length;o++)this.curveCtx.lineTo(t[o].x*n,(1-t[o].y)*e);this.curveCtx.strokeStyle=o,this.curveCtx.lineWidth=2,this.curveCtx.stroke(),t.forEach(((o,r)=>{this.curveCtx.beginPath(),this.curveCtx.arc(o.x*n,(1-o.y)*e,5,0,2*Math.PI),0===r||r===t.length-1?this.curveCtx.fillStyle="rgba(150, 150, 150, 0.8)":this.curveCtx.fillStyle="rgba(255, 255, 255, 0.8)",this.curveCtx.fill(),this.curveCtx.strokeStyle="rgba(0, 0, 0, 0.8)",this.curveCtx.lineWidth=1,this.curveCtx.stroke()}))}handleMouseDown(n){if(!this.curveCanvas)return;const e=this.curveCanvas.getBoundingClientRect(),t=(n.clientX-e.left)/e.width,o=1-(n.clientY-e.top)/e.height,r=this.params[this.params.currentChannel];let i=1/0,a=null,s=-1;r.forEach(((n,e)=>{const r=n.x-t,l=n.y-o,c=Math.sqrt(r*r+l*l);c<i&&(i=c,a=n,s=e)})),i<.05&&s>0&&s<r.length-1&&(this.activePoint={point:a,index:s})}handleMouseMove(n){if(!this.activePoint||!this.curveCanvas)return;const e=this.curveCanvas.getBoundingClientRect();let t=(n.clientX-e.left)/e.width,o=1-(n.clientY-e.top)/e.height;t=Math.max(0,Math.min(1,t)),o=Math.max(0,Math.min(1,o));const r=this.params[this.params.currentChannel],i=this.activePoint.index,a=r[i-1].x,s=r[i+1].x;t=Math.max(a+.01,Math.min(s-.01,t)),r[i].x=t,r[i].y=o,this.drawCurve(),nn()}handleMouseUp(){this.activePoint=null}applyCurves(n,e,t){const o=this.params.rgb;return n=S(o,n),e=S(o,e),t=S(o,t),A(this.params.red)||(n=S(this.params.red,n)),A(this.params.green)||(e=S(this.params.green,e)),A(this.params.blue)||(t=S(this.params.blue,t)),{r:n,g:e,b:t}}applyCurvesToImage(n){const e=n.data;for(let n=0;n<e.length;n+=4){let t=e[n]/255,o=e[n+1]/255,r=e[n+2]/255;const i=this.applyCurves(t,o,r);e[n]=Math.round(255*i.r),e[n+1]=Math.round(255*i.g),e[n+2]=Math.round(255*i.b)}return n}}let T=null;function F(n,e,t){n&&e&&(n.value=Q.currentLutParams.basic[t],e.textContent=Q.currentLutParams.basic[t].toFixed(2),n.addEventListener("input",(()=>{Q.currentLutParams.basic[t]=parseFloat(n.value),e.textContent=Q.currentLutParams.basic[t].toFixed(2),nn()})))}function U(n,e){return.5+(n-.5)*e}function W(n,e,t){n&&e&&(n.value=Q.currentLutParams.creative[t],e.textContent=Q.currentLutParams.creative[t].toFixed(1),n.addEventListener("input",(()=>{Q.currentLutParams.creative[t]=parseFloat(n.value),e.textContent=Q.currentLutParams.creative[t].toFixed(1),nn()})))}function O(n,e){if(!n)return;n.innerHTML="";const t=document.createElement("canvas");t.width=n.clientWidth||80,t.height=n.clientHeight||80,n.appendChild(t),n.style.background="conic-gradient(red, yellow, lime, cyan, blue, magenta, red)",n.style.backgroundImage="radial-gradient(circle at center, white 0%, rgba(255, 255, 255, 0) 70%), conic-gradient(red, yellow, lime, cyan, blue, magenta, red)";const o=document.createElement("div");o.className="wheel-indicator",n.appendChild(o);const r=Q.currentLutParams.colorWheels[e],i=n.clientWidth/2,a=n.clientHeight/2,s=Math.min(i,a)-2,l=(r.r-128)/128,c=(r.g-128)/128,d=(r.b-128)/128;let u=Math.sqrt(l*l+c*c+d*d);u=Math.min(1,u);let g=0;u>0&&(g=Math.atan2(c,l),d>Math.max(l,c)&&(g=Math.PI+Math.atan2(d,-l)),g<0&&(g+=2*Math.PI));const p=Math.cos(g)*u*s,h=Math.sin(g)*u*s;D(n,o,p,h);let m=!1;function b(t){const r=n.getBoundingClientRect(),i=r.width/2,a=r.height/2,s=t.clientX-r.left-i,l=t.clientY-r.top-a,c=Math.sqrt(s*s+l*l),d=Math.min(i,a)-2;if(c<=d){D(n,o,s,l);let t=Math.atan2(l,s);t<0&&(t+=2*Math.PI);const r=c/d,i=function(n,e){let t,o,r;const i=Math.floor(6*n),a=6*n-i,s=1*(1-e),l=1*(1-a*e),c=1*(1-(1-a)*e);switch(i%6){case 0:t=1,o=c,r=s;break;case 1:t=l,o=1,r=s;break;case 2:t=s,o=1,r=c;break;case 3:t=s,o=l,r=1;break;case 4:t=c,o=s,r=1;break;case 5:t=1,o=s,r=l}return{r:Math.round(255*t),g:Math.round(255*o),b:Math.round(255*r)}}(t/(2*Math.PI),r),a=Math.round(128+(i.r-128)*r),u=Math.round(128+(i.g-128)*r),g=Math.round(128+(i.b-128)*r);Q.currentLutParams.colorWheels[e]={r:a,g:u,b:g},nn()}}n.addEventListener("mousedown",(n=>{m=!0,b(n)})),document.addEventListener("mousemove",(n=>{m&&b(n)})),document.addEventListener("mouseup",(()=>{m=!1})),n.addEventListener("click",b)}function j(){Q.currentLutParams.colorWheels.shadowTint={r:128,g:128,b:128},Q.currentLutParams.colorWheels.highlightTint={r:128,g:128,b:128},Q.currentLutParams.colorWheels.tintBalance=0;const n=document.getElementById("tint-balance"),e=document.getElementById("tint-balance-value");n&&(n.value=0),e&&(e.textContent="0.0");const t=document.getElementById("shadow-color-wheel"),o=document.getElementById("highlight-color-wheel");if(t){const n=t.querySelector(".wheel-indicator");n&&D(t,n,0,0)}if(o){const n=o.querySelector(".wheel-indicator");n&&D(o,n,0,0)}nn()}function D(n,e,t,o){const r=n.clientWidth/2,i=n.clientHeight/2;e.style.left=`${r+t}px`,e.style.top=`${i+o}px`}let $=50;function R(){console.log("Image upload button clicked"),window.electronAPI&&"function"==typeof window.electronAPI.openFileDialog?window.electronAPI.openFileDialog({properties:["openFile"],filters:[{name:"Images",extensions:["jpg","jpeg","png","bmp"]}]}).then((n=>{n&&(console.log("Selected image:",n),Q.originalImageElement.src=`file://${n}`)})).catch((n=>{console.error("Error in Electron file dialog:",n),N()})):(console.log("Using browser file input"),N())}function N(){const n=document.createElement("input");n.type="file",n.accept="image/*",n.addEventListener("change",(function(n){if(this.files&&this.files[0]){const n=this.files[0];console.log("Selected file:",n.name);const e=new FileReader;e.onload=function(n){Q.originalImageElement.src=n.target.result},e.readAsDataURL(n)}})),n.click()}function X(n,e=!0){const t=document.getElementById("view-split"),o=document.getElementById("view-before"),r=document.getElementById("view-after"),i=document.getElementById("original-image-container"),a=document.getElementById("comparison-slider"),s=document.getElementById("vertical-divider");switch(t.classList.remove("active"),o.classList.remove("active"),r.classList.remove("active"),n){case"split":t.classList.add("active"),e&&($=50),i.style.clipPath=`inset(0 ${100-$}% 0 0)`,s.style.left=`${$}%`,a.style.left=`${$}%`,a.style.display="block",i.style.display="block",s.style.display="block";break;case"before":o.classList.add("active"),i.style.clipPath="inset(0 0 0 0)",a.style.display="none",s.style.display="none",i.style.display="block";break;case"after":r.classList.add("active"),i.style.display="none",a.style.display="none",s.style.display="none"}}const q={custom:{contrast:1.2,saturation:1.15,redBalance:1.05,greenBalance:.95,blueBalance:1.1,shadowsShift:[.05,0,-.05],highlightsShift:[.03,.03,0]},warm:{contrast:1.1,saturation:.9,redBalance:1.15,greenBalance:.95,blueBalance:.85,shadowsShift:[.08,.02,-.05],highlightsShift:[.05,0,-.05]},cool:{contrast:1.3,saturation:.85,redBalance:.9,greenBalance:1,blueBalance:1.2,shadowsShift:[-.03,0,.08],highlightsShift:[0,0,.03]},bw:{contrast:1.5,saturation:0,redBalance:.33,greenBalance:.33,blueBalance:.33,shadowsShift:[-.05,-.05,-.05],highlightsShift:[.05,.05,.05]},film:{contrast:.9,saturation:.8,redBalance:1.1,greenBalance:1.05,blueBalance:.9,shadowsShift:[.1,.05,0],highlightsShift:[-.02,-.02,.05]}};let J={};function _(n,e){const t=document.getElementById(n),o=document.getElementById(`${n}-value`);t&&(t.value=e),o&&(o.textContent=e.toFixed(2))}function H(n=!1){const e=document.getElementById("lut-preview");if(!e)return;let t="# LUT Preview will be generated here";e.textContent=n?t:t.slice(0,500)+"..."}function Y(n,e="info",t=3e3){let o=document.querySelector(".toast-container");o||(o=document.createElement("div"),o.className="toast-container",document.body.appendChild(o));const r=document.createElement("div");return r.className=`toast toast-${e}`,r.textContent=n,o.appendChild(r),setTimeout((()=>{r.classList.add("show")}),10),setTimeout((()=>{r.classList.remove("show"),setTimeout((()=>{o.removeChild(r)}),300)}),t),r}function G(){const n=Q.currentLutParams,e=n.size||32;let t="";t+=`# ${n.title}\n`,t+="# Generated by LOTS App\n\n",t+=`LUT_3D_SIZE ${e}\n`,t+="DOMAIN_MIN 0.0 0.0 0.0\n",t+="DOMAIN_MAX 1.0 1.0 1.0\n\n";const o=1/(e-1);for(let n=0;n<e;n++)for(let r=0;r<e;r++)for(let i=0;i<e;i++){let e=i*o,a=r*o,s=n*o;if("basic"===Q.activeMode){const n=Z(e,a,s);e=n.r,a=n.g,s=n.b}else{const n=V(e,a,s);e=n.r,a=n.g,s=n.b}e=Math.min(1,Math.max(0,e)),a=Math.min(1,Math.max(0,a)),s=Math.min(1,Math.max(0,s)),t+=`${e.toFixed(6)} ${a.toFixed(6)} ${s.toFixed(6)}\n`}return t}function Z(n,e,t){const o=Q.currentLutParams.basic||{};if(n=U(n,o.contrast||1),e=U(e,o.contrast||1),t=U(t,o.contrast||1),n*=o.redBalance||1,e*=o.greenBalance||1,t*=o.blueBalance||1,o.shadowsShift&&o.highlightsShift){let r=Math.pow(1-Math.max(n,Math.max(e,t)),2),i=Math.pow(Math.max(n,Math.max(e,t)),2);n+=o.shadowsShift[0]*r+o.highlightsShift[0]*i,e+=o.shadowsShift[1]*r+o.highlightsShift[1]*i,t+=o.shadowsShift[2]*r+o.highlightsShift[2]*i}if(void 0!==o.saturation&&1!==o.saturation){const r=.2126*n+.7152*e+.0722*t;n=r+o.saturation*(n-r),e=r+o.saturation*(e-r),t=r+o.saturation*(t-r)}return{r:n,g:e,b:t}}function V(n,e,t){const o=Q.currentLutParams;if(o.lumetri&&(0!==o.lumetri.temperature||0!==o.lumetri.tint)){const r=function(n,e,t,o,r){return(o<0||o>0)&&(n*=1-.4*o,e*=1-.2*o,t*=1+.6*o),(r>0||r<0)&&(n*=1+.3*r,e*=1-.3*r,t*=1+.3*r),{r:n,g:e,b:t}}(n,e,t,o.lumetri.temperature/150,o.lumetri.tint/150);n=r.r,e=r.g,t=r.b}if(o.lumetri){if(0!==o.lumetri.exposure){const r=Math.pow(2,o.lumetri.exposure);n*=r,e*=r,t*=r}if(0!==o.lumetri.contrast){const r=1+o.lumetri.contrast/150*1.5;n=U(n,r),e=U(e,r),t=U(t,r)}}if(o.lumetri){const r=function(n,e,t,o,r,i,a){const s=.2126*n+.7152*e+.0722*t;const l=Math.pow(s,2)*o+Math.pow(1-s,2)*r+Math.pow(s,4)*i+Math.pow(1-s,4)*a;return{r:n+=l,g:e+=l,b:t+=l}}(n,e,t,o.lumetri.highlights/150*1.5,o.lumetri.shadows/150*1.5,o.lumetri.whites/150*1.5,o.lumetri.blacks/150*1.5);n=r.r,e=r.g,t=r.b}if(o.colorWheels){const r=o.colorWheels.shadowTint,i=o.colorWheels.highlightTint,a=o.colorWheels.tintBalance/150;if(128!==r.r||128!==r.g||128!==r.b||128!==i.r||128!==i.g||128!==i.b||0!==a){const o=function(n,e,t,o,r,i){const a=.2126*n+.7152*e+.0722*t;let s=Math.pow(1-a,2),l=Math.pow(a,2);return i>0?(s*=1-i,l=l*(1-i)+i):i<0&&(l*=1+i,s=s*(1+i)-i),n+=(o.r-128)/128*s*.5,e+=(o.g-128)/128*s*.5,t+=(o.b-128)/128*s*.5,{r:n+=(r.r-128)/128*l*.5,g:e+=(r.g-128)/128*l*.5,b:t+=(r.b-128)/128*l*.5}}(n,e,t,r,i,a);n=o.r,e=o.g,t=o.b}}if(o.curves){const r=o.curves.rgb;r&&(n=S(r,n),e=S(r,e),t=S(r,t)),o.curves.red&&!A(o.curves.red)&&(n=S(o.curves.red,n)),o.curves.green&&!A(o.curves.green)&&(e=S(o.curves.green,e)),o.curves.blue&&!A(o.curves.blue)&&(t=S(o.curves.blue,t))}if(o.creative){if(0!==o.creative.vibrance){const r=o.creative.vibrance/150,i=.2126*n+.7152*e+.0722*t,a=Math.max(n,e,t),s=Math.min(n,e,t),l=r*(1-(0===a?0:(a-s)/a));n=i+(n-i)*(1+l),e=i+(e-i)*(1+l),t=i+(t-i)*(1+l)}if(o.creative.fadedFilm>0){const r=function(n,e,t,o){const r=.5*o;n=n*(1-r)+.5*r,e=e*(1-r)+.5*r,t=t*(1-r)+.5*r;const i=.1*o;return{r:n+=i,g:e+=i,b:t+=i}}(n,e,t,o.creative.fadedFilm/100);n=r.r,e=r.g,t=r.b}}return{r:n,g:e,b:t}}async function K(){console.log("Exporting LUT");try{const n=G(),e=function(n){if(!n)return"lut.cube";let e=n.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_-]/g,"").toLowerCase();return e.endsWith(".cube")||(e+=".cube"),e}(Q.currentLutParams.title),t=await async function(n,e="lut.cube"){console.log("Saving LUT file");try{const t=e.endsWith(".cube")?e:`${e}.cube`;if(!window.electronAPI||"function"!=typeof window.electronAPI.saveLut){const e=new Blob([n],{type:"text/plain"}),o=URL.createObjectURL(e),r=document.createElement("a");return r.href=o,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o),Y(`LUT downloaded as ${t}`,"success"),t}{const e=await window.electronAPI.saveLut({content:n,defaultPath:t});if(e)return Y(`LUT saved to: ${e}`,"success"),e}}catch(n){return console.error("Error saving LUT:",n),Y("Failed to save LUT file","error"),null}}(n,e);t?console.log("LUT exported successfully"):console.warn("LUT export was cancelled or failed")}catch(n){console.error("Error exporting LUT:",n),Y("Failed to export LUT: "+n.message,"error")}}let Q={activeMode:"basic",originalImage:null,processedImage:null,currentLutParams:{size:32,title:"Signature Look",contrast:1.2,saturation:1.15,redBalance:1.05,greenBalance:.95,blueBalance:1.1,shadowsShift:[.05,0,-.05],highlightsShift:[.03,.03,0]}};function nn(){Q.originalImage&&(console.log("Applying image adjustments"),"basic"===Q.activeMode?console.log("Applying basic adjustments to image"):console.log("Applying advanced Lumetri-style adjustments to image"))}window.applyImageAdjustments=nn,document.addEventListener("DOMContentLoaded",(function(){console.log("LOTS App initializing..."),window.appState=Q,console.log("Initializing UI Elements"),function(){const n=document.getElementById("view-code-btn"),e=document.getElementById("view-code-btn-advanced"),t=document.getElementById("code-modal"),o=document.getElementById("close-modal-btn");n&&t&&n.addEventListener("click",(()=>{H(!0),t.style.display="block"})),e&&t&&e.addEventListener("click",(()=>{H(!0),t.style.display="block"})),o&&o.addEventListener("click",(()=>{document.querySelectorAll(".modal").forEach((n=>{n.style.display="none"}))})),window.addEventListener("click",(n=>{document.querySelectorAll(".modal").forEach((e=>{n.target===e&&(e.style.display="none")}))}))}(),[{toggle:"basic-correction-toggle",content:"basic-correction-section",expanded:!0},{toggle:"creative-toggle",content:"creative-section",expanded:!1},{toggle:"color-wheels-toggle",content:"color-wheels-section",expanded:!1},{toggle:"curves-toggle",content:"curves-section",expanded:!1}].forEach((n=>{const e=document.getElementById(n.toggle),t=document.getElementById(n.content);e&&t&&(n.expanded&&(e.classList.add("expanded"),t.classList.add("expanded")),e.addEventListener("click",(()=>{e.classList.toggle("expanded"),t.classList.toggle("expanded")})))})),function(){const n=document.getElementById("minimize-btn"),e=document.getElementById("maximize-btn"),t=document.getElementById("close-btn");n&&n.addEventListener("click",(()=>{window.electronAPI&&window.electronAPI.windowControl("minimize")})),e&&e.addEventListener("click",(()=>{window.electronAPI&&window.electronAPI.windowControl("maximize")})),t&&t.addEventListener("click",(()=>{window.electronAPI&&window.electronAPI.windowControl("close")}))}(),function(){console.log("Initializing Basic Corrections"),Q.currentLutParams.basic||(Q.currentLutParams.basic={contrast:1.2,saturation:1.15,redBalance:1.05,greenBalance:.95,blueBalance:1.1});const n=document.getElementById("contrast"),e=document.getElementById("saturation"),t=document.getElementById("red-balance"),o=document.getElementById("green-balance"),r=document.getElementById("blue-balance"),i=document.getElementById("contrast-value"),a=document.getElementById("saturation-value"),s=document.getElementById("red-balance-value"),l=document.getElementById("green-balance-value"),c=document.getElementById("blue-balance-value");F(n,i,"contrast"),F(e,a,"saturation"),F(t,s,"redBalance"),F(o,l,"greenBalance"),F(r,c,"blueBalance"),function(){const n=document.getElementById("title"),e=document.getElementById("lut-size");n&&(n.value=Q.currentLutParams.title||"Signature Look",n.addEventListener("input",(()=>{Q.currentLutParams.title=n.value}))),e&&(e.value=Q.currentLutParams.size||"32",e.addEventListener("change",(()=>{Q.currentLutParams.size=parseInt(e.value)})))}()}(),function(){console.log("Initializing Creative Effects"),Q.currentLutParams.creative||(Q.currentLutParams.creative={fadedFilm:0,vibrance:0});const n=document.getElementById("faded-film"),e=document.getElementById("vibrance"),t=document.getElementById("faded-film-value"),o=document.getElementById("vibrance-value");W(n,t,"fadedFilm"),W(e,o,"vibrance"),function(){const n=document.getElementById("creative-toggle"),e=document.getElementById("creative-section");n&&e&&n.addEventListener("click",(()=>{n.classList.toggle("expanded"),e.classList.toggle("expanded")}))}()}(),function(){console.log("Initializing Color Wheels"),Q.currentLutParams.colorWheels||(Q.currentLutParams.colorWheels={shadowTint:{r:128,g:128,b:128},highlightTint:{r:128,g:128,b:128},tintBalance:0});const n=document.getElementById("shadow-color-wheel"),e=document.getElementById("highlight-color-wheel"),t=document.getElementById("tint-balance"),o=document.getElementById("tint-balance-value");n&&O(n,"shadowTint"),e&&O(e,"highlightTint"),t&&o&&(t.value=Q.currentLutParams.colorWheels.tintBalance,o.textContent=Q.currentLutParams.colorWheels.tintBalance.toFixed(1),t.addEventListener("input",(()=>{Q.currentLutParams.colorWheels.tintBalance=parseFloat(t.value),o.textContent=Q.currentLutParams.colorWheels.tintBalance.toFixed(1),nn()})));const r=document.querySelector('.reset-btn[data-section="colorWheels"]');r&&r.addEventListener("click",j),function(){const n=document.getElementById("color-wheels-toggle"),e=document.getElementById("color-wheels-section");n&&e&&n.addEventListener("click",(()=>{n.classList.toggle("expanded"),e.classList.toggle("expanded")}))}()}(),console.log("Setting up Curves Panel"),Q.currentLutParams.curves||(Q.currentLutParams.curves=JSON.parse(JSON.stringify(M))),T=new z(Q.currentLutParams.curves),function(){const n=document.getElementById("curves-toggle"),e=document.getElementById("curves-section");n&&e&&n.addEventListener("click",(()=>{n.classList.toggle("expanded"),e.classList.toggle("expanded")}))}(),"complete"===document.readyState||"interactive"===document.readyState?setTimeout((()=>T.init()),0):document.addEventListener("DOMContentLoaded",(()=>T.init())),Q.curvesPanel=T,console.log("Initializing Image Comparison"),function(){console.log("Initializing Preview Controller");const n=document.getElementById("original-image"),e=document.getElementById("processed-image"),t=document.getElementById("original-placeholder"),o=document.getElementById("comparison-container"),r=document.getElementById("image-upload-btn");Q.originalImageElement=n,Q.processedImageElement=e,function(){const n=document.getElementById("view-split"),e=document.getElementById("view-before"),t=document.getElementById("view-after");n&&n.addEventListener("click",(()=>{X("split")})),e&&e.addEventListener("click",(()=>{X("before")})),t&&t.addEventListener("click",(()=>{X("after")}))}(),r&&r.addEventListener("click",R),n&&(n.onload=()=>{console.log("Image loaded successfully"),Q.originalImage=n,Q.processedImage=e,t&&(t.style.display="none"),o&&(o.style.display="block"),function(){const n=document.getElementById("comparison-container"),e=document.getElementById("original-image-container"),t=document.getElementById("comparison-slider"),o=document.getElementById("vertical-divider");let r=!1,i=0,a=50;function s(n){n=Math.max(0,Math.min(100,n)),$=n,e.style.clipPath=`inset(0 ${100-n}% 0 0)`,t.style.left=n+"%",o.style.left=n+"%"}t.addEventListener("mousedown",(n=>{r=!0,i=n.clientX;const e=parseFloat(t.style.left)||$;a=e,n.preventDefault()})),document.addEventListener("mousemove",(e=>{if(!r)return;const t=n.getBoundingClientRect(),o=(e.clientX-i)/t.width*100;s(a+o),e.preventDefault()})),document.addEventListener("mouseup",(()=>{r=!1})),t.addEventListener("touchstart",(n=>{r=!0,i=n.touches[0].clientX;const e=parseFloat(t.style.left)||$;a=e,n.preventDefault()})),document.addEventListener("touchmove",(e=>{if(!r)return;const t=n.getBoundingClientRect(),o=(e.touches[0].clientX-i)/t.width*100;s(a+o),e.preventDefault()})),document.addEventListener("touchend",(()=>{r=!1})),n.addEventListener("click",(e=>{if(e.target.closest(".toggle-view")||e.target.closest(".slider-handle"))return;const t=n.getBoundingClientRect();s((e.clientX-t.left)/t.width*100)})),s($)}(),nn()})}(),function(){console.log("Initializing Presets");const n=document.querySelectorAll(".preset-btn");n.forEach((e=>{e.addEventListener("click",(()=>{n.forEach((n=>n.classList.remove("active"))),e.classList.add("active"),function(n){const e=q[n]||J[n];var t;e?(console.log(`Applying preset: ${n}`),Q.activePresetId=n,Q.currentLutParams.basic||(Q.currentLutParams.basic={}),Q.currentLutParams.basic.contrast=e.contrast,Q.currentLutParams.basic.saturation=e.saturation,Q.currentLutParams.basic.redBalance=e.redBalance,Q.currentLutParams.basic.greenBalance=e.greenBalance,Q.currentLutParams.basic.blueBalance=e.blueBalance,e.shadowsShift&&(Q.currentLutParams.basic.shadowsShift=[...e.shadowsShift]),e.highlightsShift&&(Q.currentLutParams.basic.highlightsShift=[...e.highlightsShift]),e.advanced&&(void 0!==(t=e.advanced).temperature&&Q.currentLutParams.lumetri&&(Q.currentLutParams.lumetri.temperature=t.temperature),void 0!==t.tint&&Q.currentLutParams.lumetri&&(Q.currentLutParams.lumetri.tint=t.tint)),function(){const n=Q.currentLutParams.basic;_("contrast",n.contrast),_("saturation",n.saturation),_("red-balance",n.redBalance),_("green-balance",n.greenBalance),_("blue-balance",n.blueBalance)}(),nn()):console.warn(`Preset '${n}' not found`)}(e.id.split("-")[1])}))})),function(){try{const n=localStorage.getItem("lotsAppUserPresets");n&&(J=JSON.parse(n),console.log("Loaded user presets:",Object.keys(J)))}catch(n){console.error("Failed to load user presets:",n)}}()}(),console.log("Initializing File Service"),console.log("Initializing LUT Generator Service"),window.generateCubeLUT=G,console.log("Initializing Export Service"),function(){const n=document.getElementById("save-lut-btn"),e=document.getElementById("save-lut-btn-advanced");n&&n.addEventListener("click",K),e&&e.addEventListener("click",K)}(),function(){const n=document.getElementById("mode-toggle"),e=document.getElementById("basic-controls"),t=document.getElementById("advanced-controls");n&&n.addEventListener("change",(function(){const n=this.checked;Q.activeMode=n?"advanced":"basic",e&&t&&(console.log(`Switching to ${Q.activeMode} mode`),e.style.display=n?"none":"block",t.style.display=n?"block":"none",Q.originalImage&&Q.processedImage&&nn())}))}(),function(){const n=document.getElementById("minimize-btn"),e=document.getElementById("maximize-btn"),t=document.getElementById("close-btn");n&&n.addEventListener("click",(()=>{window.electronAPI&&window.electronAPI.windowControl("minimize")})),e&&e.addEventListener("click",(()=>{window.electronAPI&&window.electronAPI.windowControl("maximize")})),t&&t.addEventListener("click",(()=>{window.electronAPI&&window.electronAPI.windowControl("close")}))}(),console.log("LOTS App initialized successfully")}))})();